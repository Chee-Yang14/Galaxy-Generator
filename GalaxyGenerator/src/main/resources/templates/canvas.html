<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head >
    <meta charset="ISO-8859-1" />
    <title>All star systems</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="/webjars/bootstrap/css/bootstrap.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@200&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;500;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" th:href="@{'/css/style.css'}" />
    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
    <script
      type="text/javascript"
      src="/webjars/bootstrap/js/bootstrap.min.js"
    ></script>
  </head>
  <body >
    <div >
      <div
        id="size"
        th:attr="data-size=${listStarSystems.size()}"
        style="
          position: relative;
          background-image: url('https://imageio.forbes.com/specials-images/imageserve/5ed68e8310716f0007411996/0x0.jpg?format=jpg&width=1200');
          background-position: center;
          width: 70%;
          height: 1000px;
          float: left;
        "
      >
        <button
          th:each="starSystem : ${listStarSystems}"
          type="button"
          th:inline="javascript"
          style="
            position: absolute;
            height: 0px;
            width: 0px;
            padding: 0px;
            background-size: cover;
          "
          th:styleappend="|left: ${starSystem.location[0]*10}px; top: ${starSystem.location[1]*10}px|"
          th:onclick="|show('${starSystem.starsystemId}')|"
        >
          <div th:switch="${starSystem.type}">
            <img th:case="'A'" th:src="${'/images/AStar.png'}" width="30px" height="30px" />
            <img th:case="'B'" th:src="${'/images/BStar.png'}" width="30px" height="30px" />
            <img th:case="'F'" th:src="${'/images/FStar.png'}" width="30px" height="30px" />
            <img th:case="'G'" th:src="${'/images/GStar.png'}" width="30px" height="30px" />
            <img th:case="'K'" th:src="${'/images/KStar.png'}" width="30px" height="30px" />
            <img th:case="'M'" th:src="${'/images/MStar.png'}" width="30px" height="30px" />
            <img th:case="'O'" th:src="${'/images/OStar.png'}" width="30px" height="30px" />
            <!-- <img th:case="*" th:src="${'images/KStar.png'}" width="30px" height="30px" /> -->
          </div>
        </button>
      </div>
      <div
        th:id="'div'+${starSystem.starsystemId}"
        th:each="starSystem : ${listStarSystems}"
        style="position: relative; right: 5%; display: none; float: right"
      >
        <div style="text-align: center">
          <h3 th:text="${starSystem.name}"></h3>
          <dl>
            <dt>Economy Level:</dt>
            <dd th:text="${starSystem.economyLevel}"></dd>
            <dt>Government:</dt>
            <dd th:text="${starSystem.goverment}"></dd>
            <dt>Population:</dt>
            <dd th:text="${starSystem.population}"></dd>
            <dt>Space Resources:</dt>
            <dd th:text="${starSystem.spaceResources}"></dd>
            <dt>Type:</dt>
            <dd th:text="${starSystem.type}"></dd>
          </dl>
          <div style="position: absolute; left: 135px; top: 120px">
	          <form th:action="'/StarSystemEditPage/'+${starSystem.starsystemId}" method="get">
	          	<button 
	          		style="background-color:white; border-color:black; 
	          			color:black; width: 60px; height: 45px;"
	          		role = "button"
	          		class="btn btn-primary" 
	          		th:text="edit">
	          	</button>
	          </form>
	      </div>
        </div>
        <div
          style="text-align: center"
          th:each="planet : ${starSystem.planets}"
        >
          <button
            class="button-30"
            role="button"
            th:text="${planet.name}"
            th:onclick="|showPlanet('${planet.planetId}')|"
          ></button>
          <div
            th:id="'planet'+${planet.planetId}"
            style="
              top: 300px;
              left: 50%;
              position: absolute;
              left: -1000px;
              width: 700px;
              height: 500px;
              display: none;
              border-style: solid;
              padding: 20px;
              border-radius: 1;
              background: white;
              border-radius: 0% 0% 0% 0% / 0% 0% 0% 0%;
              box-shadow: 20px 20px #7f7fff;
            "
          >
            <h3 th:text="${planet.name}" class="planetname"></h3>
            <dl>
              <dt>Economy Level:</dt>
              <p th:text="${planet.economyLevel}"></p>
              <dt>Economy Type:</dt>
              <p th:text="${planet.economyType}"></p>
              <dt>Description:</dt>
              <p
                th:text="${planet.description}"
                style="inline-size: 600px; word-wrap: break-word"
              ></p>
              <dt>Population:</dt>
              <p th:text="${planet.population}"></p>
              <dt>Natural Resources:</dt>
              <p th:text="${planet.naturalResources}"></p>
              <dt>Size:</dt>
              <p th:text="${planet.size}"></p>
              <button
                class="button-54"
                role="button"
                th:onclick="|closeA('${planet.planetId}')|"
              >
                Close
              </button>
            </dl>
          </div>
        </div>
      </div>
      <div id="size2" th:attr="data-size=${listUniverse.size()}">
        <a href="http://localhost:8080/canvas/1" id="nextUniverse"></a>
        <h1 th:text="'Universe '+${currentUniverse.universeId}"></h1>
        <button style="width: 70px; height: 50px; position: absolute"th:onclick="|increment('${currentUniverse.universeId}')|">  next</button>
        <button
          style="width: 70px; height: 50px; position: absolute; right: 0;"
          th:onclick="|decrement('${currentUniverse.universeId}')|"
        >
          back
        </button>
      </div>
  </div>
    <script >
      
      function increment(id) {
              var size = document.querySelector("#size2").dataset.size;
              var increUrlPart1 = 'http://localhost:8080/canvas/';
              var increParameter = parseInt(id);

              if (increParameter<size && increParameter != size) {
                increParameter += 1;
              }

              var newURL = increUrlPart1 +  increParameter;
              document.getElementById('nextUniverse').href = newURL;
              window.location = newURL;
            }

      function decrement(id) {
        var size = document.querySelector("#size2").dataset.size;
        var decreUrlPart1 = 'http://localhost:8080/canvas/';
        var decreParameter = parseInt(id);
        if(decreParameter>1){decreParameter -= 1;}
        
        var newURL = decreUrlPart1 + decreParameter;
        document.getElementById('nextUniverse').href = newURL;
        window.location = newURL;
     }

      //Function to show buttons of planets
      function show(id) {
        var size = document.querySelector("#size").dataset.size;
        var x = document.getElementById("div" + id);
        if (x.style.display == "none") {
          x.style.display = "inline-block";
        } else {
          x.style.display = "none";
        }
        for (var i = 1; i <= size; i++) {
          if (i == id) continue;
          var y = document.getElementById("div" + i);
          y.style.display = "none";
        }
      }

      //Function to show planet's info
      function showPlanet(id) {
        var x = document.getElementById("planet" + id);
        if (x.style.display == "none") {
          x.style.display = "inline";
          x.style.position = "absolute";
        } else {
          x.style.display = "none";
        }
      }

      //Function to close box
      function closeA(id) {
        var x = document.getElementById("planet" + id);
        x.style.display = "none";
      }
    </script>
  </body>
</html>
